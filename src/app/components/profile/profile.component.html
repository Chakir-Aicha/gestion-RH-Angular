
<div class="profile-container" *ngIf="isLoading">
  <p>Loading user information...</p>
</div>

<div class="profile-container" *ngIf="!isLoading && user">
  <div class="profile-header">
    <img *ngIf="user.picture" [src]="'data:image/jpeg;base64,' + user.picture" alt="Profile Picture" class="profile-picture" />
    <div class="profile-info">
      <h2>{{ user.firstName }} {{user.lastName}}</h2>
      <p *ngIf="user.email"><i class="fa fa-envelope"></i> {{ user.email }}</p>
      <p *ngIf="user.linkedIn"><i class="fa fa-linkedin"></i> {{ user.linkedIn }}</p>
      <p *ngIf="user.twitter"><i class="fa fa-twitter"></i> {{ user.twitter }}</p>
    </div>
  </div>

  <div class="profile-actions">
    <button class="btn btn-edit" (click)="openEditModal()">
      <i class="fa fa-cog"></i> Edit Information
    </button>
    <button class="btn btn-password" (click)="openChangePasswordModal()">
      <i class="fa fa-key"></i> Change Password
    </button>
  </div>
</div>

<!-- Edit Info Modal -->
<div *ngIf="isEditModalOpen" class="modal" role="dialog" aria-modal="true">
  <div class="modal-content animated">
    <h3>Edit Information</h3>

    <form (ngSubmit)="updateUser()">
      <label for="name">First Name:</label>
      <input id="firstName" [(ngModel)]="editUser.firstName" name="firstName" class="form-input" required />

      <label for="name">Last Name:</label>
      <input id="lastName" [(ngModel)]="editUser.lastName" name="lastName" class="form-input" required />

      <label for="email">Email:</label>
      <input id="email" [(ngModel)]="editUser.email" name="email" class="form-input" required />

      <label for="linkedIn">LinkedIn:</label>
      <input id="linkedIn" [(ngModel)]="editUser.linkedIn" name="linkedIn" class="form-input" />

      <label for="twitter">Twitter:</label>
      <input id="twitter" [(ngModel)]="editUser.twitter" name="twitter" class="form-input" />

      <div class="modal-actions">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <button type="button" class="btn btn-secondary" (click)="closeEditModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- Change Password Modal -->
<div *ngIf="isChangePasswordModalOpen" class="modal" role="dialog" aria-modal="true">
  <div class="modal-content animated">
    <h3>Change Password</h3>

    <form (ngSubmit)="changePassword()" #changePasswordForm="ngForm">
      <div class="form-group">
        <label for="oldPassword">Old Password</label>
        <input type="password" id="oldPassword" name="oldPassword" class="form-input" [(ngModel)]="oldPassword" required #oldPasswordInput="ngModel" />
        <div *ngIf="oldPasswordInput.invalid && oldPasswordInput.touched" class="text-danger">
          Old password is required.
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">New Password</label>
        <input type="password" id="newPassword" name="newPassword" class="form-input" [(ngModel)]="newPassword" required minlength="6" #newPasswordInput="ngModel" />
        <div *ngIf="newPasswordInput.invalid && newPasswordInput.touched" class="text-danger">
          New password is required and must be at least 6 characters.
        </div>
      </div>

      <div class="modal-actions">
        <button type="submit" class="btn btn-primary" [disabled]="changePasswordForm.invalid">Change Password</button>
        <button type="button" class="btn btn-secondary" (click)="closeChangePasswordModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>
